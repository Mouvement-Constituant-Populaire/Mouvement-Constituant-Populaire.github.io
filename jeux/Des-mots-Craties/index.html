<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>MCP - Des-mots-Craties</title>	
		<link href="style.css" rel="stylesheet" />				
	</head>
	<body>
	 <h1> Des-mots-Craties</h1>
	 		 
	 <h2>Lancer une partie !</h2>
	 	 
	 <form id="options_partie" method="post">
	    <fieldset>
		    <legend>Choisissez votre niveau de difficulté :</legend>
			<div>
				<input type="checkbox" id="niv1" name="niv1" checked />
				<label for="niv1">Niveau 1</label>
			</div>
			<div>
				<input type="checkbox" id="niv2" name="niv2" />
				<label for="niv2">Niveau 2</label>
			</div>
			<div>
				<input type="checkbox" id="niv3" name="niv3" />
				<label for="niv3">Niveau 3</label>
			</div>
	    </fieldset> 
	 </form>
	
	 <br/>
	 <button onclick="creerPartie()" class="button" >Créer la partie</button>
	 <br/>
	
	 <div id="listeLiensParties">
	 </div>
	
	 <br/>
	 <button onclick="tirer20cartes(1)" class="button" >Tirer 20 cartes de niveau 1</button>	 
	 <br/>
	 
	 <div id="listeLiensCarte">
	 </div>
	 
	 L'ensemble des documents, codes sources et images sont distribués sous la licence CC-BY-SA V2.0.
	 https://creativecommons.org/licenses/by-sa/2.0/fr/deed.fr 
	 
	 Sauf pour les contenus dont il est fait mention explicitement d'une autre licence ou d'un copyright tiers.
	
	</body>	
	
	<script>	
	//TODO: Ajouter une colonne "niveau" pour chaque mot. Ensuite, il faudra ignorer la première case dans carte.html.
	//TODO: créer un game.html pour héberger la partie, avec la liste des tirages dans l'url, et la carte courante
	//avec des boutons pour faire "carte suivante" et "carte précédente" 
	
	function choisirMot(niveau) 
	{
		if(niveau = 1) return Math.floor(Math.random() * 34) + 4;
		else if(niveau = 2) return Math.floor(Math.random() * 32) + 44;
		else return Math.floor(Math.random() * 72) + 4;
	}
	
	var numeroMot = 0;
	
	function tirer20cartes(niveau) 
	{
		let divListeLiensCarte = document.getElementById("listeLiensCarte");
		let tirages = new Array();
		
		tirages.push(choisirMot(niveau));
		
		let i = 0;
		while(tirages.length < 20 && i < 60) 
		{
			let num = choisirMot(1);
			console.log(tirages.length);			
			console.log(num);
			
			let pasEncoreChoisi = true;
			
			tirages.forEach(function (item, index, array) {
			if(item == num) pasEncoreChoisi = false;
			console.log(pasEncoreChoisi);
			});
			
			if (pasEncoreChoisi) tirages.push(num);		
			
			i++;		
		}
					
		tirages.forEach(function (item, index, array) {
			let n = index + 1;	
			divListeLiensCarte.innerHTML += '<a href= "https://mouvement-constituant-populaire.github.io/jeux/Des-mots-Craties/carte.html?n=' + item + '" target="_blank">Carte ' + n + '(' + item + ')</a>';
			
			divListeLiensCarte.innerHTML += "<br/>";
		});
				
	}		
		
	function creerPartie(niveau) 
	{
		let listeLiensParties = document.getElementById("listeLiensParties");
		let tirages = new Array();
		
		tirages.push(choisirMot(1));
		
		let i = 0;
		while(tirages.length < 20 && i < 60) 
		{
			let num = choisirMot(1);
			console.log(tirages.length);			
			console.log(num);
			
			let pasEncoreChoisi = true;
			
			tirages.forEach(function (item, index, array) {
			if(item == num) pasEncoreChoisi = false;
			console.log(pasEncoreChoisi);
			});
			
			if (pasEncoreChoisi) tirages.push(num);		
			
			i++;		
		}
		
		niveau = "1";
		game_url = '<a href= "https://mouvement-constituant-populaire.github.io/jeux/Des-mots-Craties/partie.html?niveaux=' + niveau + '&cartes='; 
				
		tirages.forEach(function (item, index, array) {
			let n = index + 1;	
			game_url += item + ','; 
		});
				
		game_url += '" target="_blank">Lien vers la partie</a>';
		
		listeLiensParties.innerHTML += game_url;
		listeLiensParties.innerHTML += "<br/> ";
	}	
	
    </script>
</html>
